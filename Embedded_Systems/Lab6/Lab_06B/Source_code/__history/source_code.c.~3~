#include <main-proteus.h>
#byte PORTB         =0xF81    
                              
void init (void);             
void timer0_int(void);        
int16 counter1=20;            
                              
                              // Κύριο πρόγραμμα
void main()      {            // Ανοίγει η αγκύλη της main
init();                       // Κλήση της ρουτίνας των αρχικών ρυθμίσεων



     while (TRUE){    
         }                    // Tο κύριο πρόγραμμα δεν κάνει τίποτα. 
                              // Εκτελεί έναν ατέρμονα βρόχο
}                             // κλείνει η αγκύλη του main


#INT_TIMER0                  

void timer0_int(void){
   set_timer0(63661);            
                                 
   counter1--;
   if (counter1==0){
         counter1=20;
         PORTB=PORTB+1;              
   }            
   }       

                              // Αρχή ρουτίνας αρχικών ρυθμίσεων………………………………………
void init (void) {       

SETUP_TIMER_0(T0_INTERNAL | T0_DIV_64 );  // Ρύθμιση του προγραμματιζόμενου
                                          // διαιρέτη στην τιμή 1/64

 set_timer0(63661);                       //  Αρχική τιμή του  timer0
                                          // ώστε να συμβαίνουν διακοπές
                                          // κάθε 10 ms 

 enable_interrupts(INT_TIMER0);           // Ενεργοποίηση της                                                       
                                          // διακοπής από τον timer0
 enable_interrupts(GLOBAL);               // Ενεργοποίηση του γενικού                                                    
                                          // διακόπτη των διακοπών


  set_tris_b(0x00);                        //Η πόρτα Β γίνεται έξοδος
  PORTB=0x00;                             //Αρχική τιμή 0 στην πόρτα Β   
        }
                           // Τέλος ρουτίνας αρχικών ρυθμίσεων……………………………………………

